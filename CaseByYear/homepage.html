
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1.0" name="viewport">

    <title>Project Tycho | The Rise & Death of Fatal Diseases in USA</title>
    <link href="css/foundation.css" rel="stylesheet">
    <script src="js/vendor/modernizr.js"></script>
    <meta class="foundation-data-attribute-namespace">
    <meta class="foundation-mq-xxlarge">
    <meta class="foundation-mq-xlarge">
    <meta class="foundation-mq-large">
    <meta class="foundation-mq-medium">
    <meta class="foundation-mq-small">
	</style>
        <link rel="stylesheet" type="text/css" href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.7.1/themes/base/jquery-ui.css">
        <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script>
        <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.7.1/jquery-ui.min.js"></script>

    <style>
</style>
    <meta class="foundation-mq-topbar">
    <meta charset="utf-8">
    <style>
  /* disable text selection */
      svg *::selection {
         background : transparent;
      }
     
      svg *::-moz-selection {
         background:transparent;
      } 
     
      svg *::-webkit-selection {
         background:transparent;
      }
      rect.selection {
        stroke          : #333;
        stroke-dasharray: 1px;
        stroke-opacity  : 0.5;
        fill            : transparent;
      }

      rect.cell-border {
        stroke: #eee;
        stroke-width:0.3px;   
      }

      rect.cell-selected {
        stroke: rgb(51,102,153);
        stroke-width:0.5px;   
      }

      rect.cell-hover {
        stroke: #F00;
        stroke-width:0.3px;   
      }

      text.mono {
        font-size: 9pt;
        font-family: Consolas, courier;
        fill: #aaa;
      }

      text.text-selected {
        fill: #000;
      }

      text.text-highlight {
        fill: #c00;
      }
      text.text-hover {
        fill: #00C;
      }
      #tooltip {
	   z-index: 10;
        position: absolute;
        width: 200px;
        height: auto;
        padding: 10px;
        background-color: white !important;
        -webkit-border-radius: 10px !important;
        -moz-border-radius: 10px !important;
        border-radius: 10px !important;
        -webkit-box-shadow: 4px 4px 10px rgba(0, 0, 0, 0.4) !important;
        -moz-box-shadow: 4px 4px 10px rgba(0, 0, 0, 0.4) !important;
        box-shadow: 4px 4px 10px rgba(0, 0, 0, 0.4) !important;
        pointer-events: none !important;
      }

      #tooltip.hidden {
        display: none !important;
      }

      #tooltip p {
        margin: 0 !important;
        font-family: sans-serif !important;
        font-size: 12px !important;
        line-height: 20px !important;
      }
    </style>
</head>

<body onload="load_map()">

<nav class="top-bar" data-topbar role="navigation">
  <ul class="title-area">
    <li class="name">
      <h1><a href="homepage.html">Project <strong>Tycho</strong></a></h1>
    </li>
     <!-- Remove the class "menu-icon" to get rid of menu icon. Take out "Menu" to just have icon alone -->
    <li class="toggle-topbar menu-icon"><a href="#"><span>Menu</span></a></li>
  </ul>

  <section class="top-bar-section">
    <!-- Right Nav Section -->
    <ul class="right">
	 <li class=""><a href="Project Tycho   The Rise & Death of Fatal Diseases in USA.html">All Diseases</a></li>
      <li class="active"><a href="homepage.html">Measles</a></li>
    </ul>
  </section>
</nav>
    <div class="hidden" id="tooltip">
        <p><span id="value"></span></p>
    </div><span id="value"><script src="http://d3js.org/d3.v3.min.js"></script> <script src=
"http://syntagmatic.github.io/parallel-coordinates/examples/lib/sylvester.js"></script> <script src=
"http://syntagmatic.github.io/parallel-coordinates/examples/lib/underscore.js"></script> <script src=
"http://syntagmatic.github.io/parallel-coordinates/examples/lib/underscore.math.js"></script> <script src=
"http://syntagmatic.github.io/parallel-coordinates/d3.parcoords.js"></script></span>
    <link href=
    "http://syntagmatic.github.io/parallel-coordinates/d3.parcoords.css" rel=
    "stylesheet" type="text/css">

    <div class="row">
        <div class="large-12 columns text-center">
            <h1>Project Tycho <small>Viruses Gone Wild</small></h1>
            <hr>
        </div>
    </div>

	<div class="row">
<div class="large-6 columns">
<img src="http://motherboard-cdn-assets.vice.com/content-images/contentimage/13560/1399663712753.jpeg?crop=0.5614617940199336xw:1xh;*,*&resize=500:*&output-format=jpeg&output-quality=90"><br>
</div>
<div class="large-6 columns">
<h3 class="show-for-small text-center">Introduction to Measles<hr></h3>
<div class="panel">
<h4 class="hide-for-small text-center">Introduction to Measles<hr></h4>
<h5 class="subheader">Measles is a highly contagious, serious disease caused by a virus. In 1980, before widespread vaccination, measles caused an estimated 2.6 million deaths each year.</h5>
</div>
</div>
<div class="large-6 columns">
<h3 class="show-for-small text-center">Key Facts<hr></h3>
<div class="panel">
<h4 class="hide-for-small text-center">Key Facts<hr></h4>
<h5 class="subheader">During 2000-2013, measles vaccination prevented an estimated 15.6 million deaths making measles vaccine one of the best buys in public health.
</h5>
</div>
</div>

</div>
<hr>
    <div class="row">
        <div class="large-6 columns">
            <h4 class="text-center">Measles Across <strong>USA</strong><br>
            <small class="subheader" id="small-measles">January 1928 - December
            2013</small></h4>

            <div class="small-6 columns text-center cases">
                <h2><strong>179,2782</strong><br>
                <small>cases</small></h2>
            </div>

            <div class="small-6 columns text-center state">
                <h2><strong>New York</strong> <small>worst affected</small></h2>
            </div>
        </div>

        <div class="large-6 columns callout radius">
            <h4 class="text-center"><strong>Vaccination</strong><br>
            <small class="subheader">Protect yourself!</small></h4>

            <p>Measles can be prevented by the combination MMR (measles, mumps,
            and rubella) vaccine. CDC recommends that children get two
            doses—</p>

            <ol>
                <li>the first dose at 12 through 15 months of age and</li>

                <li>the second dose 4 through 6 years of age.</li>
            </ol>
            <p>
        </div>
        <hr>
    </div>

    <div class="row">
        <div class="text-center panel">
            <h2><strong>Overview</strong></h2>

            <h4 class="subheader">Heatmap of 51 states of US against the
            years</h4>
			<p>State with a higher contrast show that it has significantly
            <strong>higher</strong> case count. Each cell shows the data for highlighted state and corresponding year</p> <br>
			<p>Click any individual year or state to sort</p>
        </div>

        <div class="large-12 columns" id="chart" style=
        'overflow:hidden; width:1100px; height:auto;'></div>
        <hr>
    </div>

    <div class="row">
        <div class="text-center panel">
            <h2><strong>USA Map</strong></h2>

            <h4 class="subheader">Choropleth map of US, historically aggregated
            numbers</h4>

            <p>State with a higher contrast show that it has significantly
            <strong>higher</strong> case count. The data shown is aggregated
            case count from <strong>1928-2003</strong> per state</p>
			<p><small>Click any state to see detailed information</small></p>
        </div>

        <div class="large-12 columns">
            <object data="map-click.html" height="600px" type="text/html"
            width="1100px">
                </object>
        </div>
        <hr>
    </div>

    <div class="row">
        <div class="text-center panel">
            <h2><strong>Measles by Month</strong></h2>

            <h4 class="subheader">A look at how occurrence of measles varies
            historically across the 12 months</h4>

            <p>State with a higher contrast show that it has significantly
            <strong>higher</strong> case count. The data shown is aggregated
            case count from <strong>1928-2003</strong> per state</p>
        </div>

        <div class="large-12 columns">
            <div class="parcoords" id="example-progressive" style=
            "width:1300px;margin-left:-200px;height:450px;"></div>
        </div>
		<hr>
    </div>
	 <div class="row">
        <div class="text-center panel">
            <h2><strong>Total Measles Cases by the Years</strong></h2>

            <h4 class="subheader">A look at how the introduction of vaccines significantly affected the case rate</h4>

            <p>The plot is total cases by year. It shows the drop in cases from vaccine <small>(Licensed vaccines to prevent the disease became available in <strong>1963<strong>. An <strong>improved<strong> measles vaccine became available in <strong>1968<strong>.)</small></p>
        </div>

        <div class="large-12 columns">
            <object data="CaseByYear.html" height="430px" type="text/html"
            width="830px">
                </object>
        </div>
    </div>
	
	 <div class="row">
        <div class="text-center panel">
            <h2><strong>Occurrence Within a Year by Week</strong></h2>

            <h4 class="subheader">A look at how the introduction of vaccines significantly affected the case rate</h4>

            <p class="text-justify">Winter and Spring seems to be the periods in which most cases occur. The curve seems quite smooth, with a few small fluctuations.</p>
        </div>

        <div class="large-12 columns">
            <object data="CaseByWeek.html" height="435px" type="text/html"
            width="830px">
                </object>
        </div>
    </div>
	<div class="row">
        <div class="text-center panel">
            <h2><strong>The Region, Population & Sum Trifecta</strong></h2>

            <h4 class="subheader">From 1928 - 1970, how the avg Population & incidence rate/100,000 maps to the region and the state</h4>

            <p class="text-justify">No strong correlation between population and average incidence rate for the state can be observed.<br><small> *Population data for Hawaii and Alaska inconsistent & not included</small></p>
        </div>

        <div class="large-12 columns">
            <object data="REGION.html" height="435px" type="text/html"
            width="930px">
                </object>
        </div>
    </div>
	
	<div class="row">
        <div class="text-center panel">
            <h2><strong>How the Regions React</strong></h2>

            <h4 class="subheader">From 1928 - 1970, see in this area chart how the different regions of USA as whole fare in the number of Measles incidence</h4>

            <p class="text-justify">The south records a lower number of incidence rate than the rest of the regions, the north-east despite being smaller in area records the highest incidence rate per 100,000</p>
        <div class="large-6 large-centered columns">
		<img src="http://thomaslegion.net/sitebuildercontent/sitebuilderpictures/map_of_usa_regions_by_us_census_bureau.jpg"/>
		</div>
		</div>
		
        <div class="large-12 columns">
            <object data="Population.html" height="435px" type="text/html"
            width="930px">
                </object>
        </div>
    </div>
	
	<div class="row">
        <div class="text-center panel">
		
            <h2><strong>Seasonality</strong></h2>

            <h4 class="subheader">From 1928 - 1978, dive into this circular heat map to see how the 4 season in these 50 years affect the case occurrence</h4>
			 <p class="text-justify">Hover over each segment for more details</p>
            
		</div>
		
        <div class="large-12 columns">
            <object data="index_ciheat.html" height="560px" type="text/html"
            width="980px">
                </object>
        </div>
    </div>
	
	<div class="row">
        <div class="text-center panel">
		
            <h2><strong>Seasonality</strong></h2>

            <h4 class="subheader">From 1928 - 1978, dive into this percentage stacked area chart to see how the 4 season in these 50 years affect the case occurrence</h4>

           <p class="text-justify"> <small>Chart is filtered for data from 1928 to 1970</small></p>
		</div>
		
        <div class="large-12 columns">
            <object data="StatelineRegion.html" height="560px" type="text/html"
            width="980px">
                </object>
        </div>
    </div>

    <div class="large-12 columns panel">
        <div class="row">
            <div class="medium-6 large-6 columns">
                © Information Visualization Project
            </div>

            <div class="medium-6 large-6 columns">
                <ul class="inline-list right">
                    <li>
                        <a href="mailto:oha1@pitt.edu">Omar Akhtar</a>
                    </li>

                    <li>
                        <a href="mailto:ama189@pitt.edu">Abdulrahman Aljasim</a>
                    </li>

                    <li>
                        <a href="mailto:zhx21@pitt.edu">Zhuoheng Xie</a>
                    </li>

                    <li>
                        <a href="mailto:yuz71@pitt.edu">Yue Zhang</a>
                    </li>
                </ul>
            </div>
        </div>
    </div><script type="text/javascript">


    function load_map(){
    document.getElementById("content").innerHTML='<object type="text/html" data="map-click.html" ><\/object>';
    }



    var margin = { top: 70, right: 590, bottom: 50, left: 150 },
    cellSize=10;
    col_number=76;
    row_number=51;
    width = cellSize*col_number, // - margin.left - margin.right,
    height = cellSize*row_number , // - margin.top - margin.bottom,
    //gridSize = Math.floor(width / 24),
    legendElementWidth = cellSize*2.5,
    colorBuckets = 21,
    colors = ['#005824','#1A693B','#347B53','#4F8D6B','#699F83','#83B09B','#9EC2B3','#B8D4CB','#D2E6E3','#EDF8FB','#FFFFFF','#F1EEF6','#E6D3E1','#DBB9CD','#D19EB9','#C684A4','#BB6990','#B14F7C','#A63467','#9B1A53','#91003F'];
    hcrow = [49,11,30,4,18,6,12,20,19,33,32,26,44,35,38,3,23,41,22,10,2,15,16,36,8,25,29,7,27,34,48,31,45,43,14,9,39,1,37,47,42,21,40,5,28,46,50,17,24,13], // change to gene name or probe id
    hccol = [6,5,41,12,42,21,58,56,14,16,43,15,17,46,47,48,54,49,37,38,25,22,7,8,2,45,9,20,24,44,23,19,13,40,11,1,39,53,10,52,3,26,27,60,50,51,59,18,31,32,30,4,55,28,29,57,36,34,33,35], // change to gene name or probe id
    rowLabel = ['ALABAMA','ALASKA','ARIZONA','ARKANSAS','CALIFORNIA','COLORADO','CONNECTICUT','DELAWARE','DISTRICT OF COLUMBIA','FLORIDA','GEORGIA','HAWAII','IDAHO','ILLINOIS','INDIANA','IOWA','KANSAS','KENTUCKY','LOUISIANA','MAINE','MARYLAND','MASSACHUSETTS','MICHIGAN','MINNESOTA','MISSISSIPPI','MISSOURI','MONTANA','NEBRASKA','NEVADA','NEW HAMPSHIRE','NEW JERSEY','NEW MEXICO','NEW YORK','NORTH CAROLINA','NORTH DAKOTA','OHIO','OKLAHOMA','OREGON','PENNSYLVANIA','RHODE ISLAND','SOUTH CAROLINA','SOUTH DAKOTA','TENNESSEE','TEXAS','UTAH','VERMONT','VIRGINIA','WASHINGTON','WEST VIRGINIA','WISCONSIN','WYOMING'], // change to gene name or probe id
    colLabel = ['1928','1929','1930','1931','1932','1933','1934','1935','1936','1937','1938','1939','1940','1941','1942','1943','1944','1945','1946','1947','1948','1949','1950','1951','1952','1953','1954','1955','1956','1957','1958','1959','1960','1961','1962','1963','1964','1965','1966','1967','1968','1969','1970','1971','1972','1973','1974','1975','1976','1977','1978','1979','1980','1981','1982','1983','1984','1985','1986','1987','1988','1989','1990','1991','1992','1993','1994','1995','1996','1997','1998','1999','2000','2001','2002','2003']; // change to contrast name

    d3.tsv("data_heatmap.tsv",
    function(d) {
    return {
    row:   +d.row_idx,
    col:   +d.col_idx,
    value: +d.log2ratio
    };
    },
    function(error, data) {
    var colorScale = d3.scale.quantile()
      .domain([ 0 , 0, 16000])
      .range(colors);

    var svg = d3.select("#chart").append("svg")
      .attr("width", width + margin.left + margin.right)
      .attr("height", height + margin.top + margin.bottom)
      .append("g")
      .attr("transform", "translate(" + margin.left + "," + margin.top + ")")
      ;

      
      
    var rowSortOrder=false;
    var colSortOrder=false;
    var rowLabels = svg.append("g")
      .selectAll(".rowLabelg")
      .data(rowLabel)
      .enter()
      .append("text")
      .text(function (d) { return d; })
      .attr("x", 0)
      .attr("y", function (d, i) { return (i+1) * cellSize; })
      .style("text-anchor", "end")
      .attr("transform", "translate(-6," + cellSize / 1.5 + ")")
      .attr("class", function (d,i) { return "rowLabel mono r"+i;} ) 
    //.append("input").attr("type","button").attr("class","button").attr("value", function (d){return d;} )
      .on("mouseover", function(d) {d3.select(this).classed("text-hover",true);})
      .on("mouseout" , function(d) {d3.select(this).classed("text-hover",false);})
      .on("click", function(d,i) {rowSortOrder=!rowSortOrder; sortbylabel("r",i,rowSortOrder);d3.select("#order").property("selectedIndex", 4).node().focus();;})
        .filter(function(d){ return typeof(d) == "string"; })
    .style("cursor", "pointer")
    /* .on("click", function(d){
        //document.location.href = "Page2.html/" + d;
        document.location.href = "Page2.html?"+ d;
        
    })*/
     
     ;
     
     /*
    var rowLabels = svg.append("g")
    .selectAll("input")
    .data(rowLabel)
    .enter()
    .append("input")
    .attr("type","button")
    .attr("class","button")
    .attr("value", function (d){return d;} );*/
     
     
    var colLabels = svg.append("g")
      .selectAll(".colLabelg")
      .data(colLabel)
      .enter()
      .append("text")
      .text(function (d) { return d; })
      .attr("x", 0)
      .attr("y", function (d, i) {  return (i+1)  * cellSize; })
      .style("text-anchor", "left")
      .attr("transform", "translate("+cellSize/2 + ",-6) rotate (-90)")
      .attr("class",  function (d,i) { return "colLabel mono c"+i;} )       

      .on("mouseover", function(d) {d3.select(this).classed("text-hover",true);})
      .on("mouseout" , function(d) {d3.select(this).classed("text-hover",false);})
      .on("click", function(d,i) {colSortOrder=!colSortOrder;  sortbylabel("c",i,colSortOrder);d3.select("#order").property("selectedIndex", 4).node().focus();;})
      ;

    var heatMap = svg.append("g").attr("class","g3")
        .selectAll(".cellg")
        .data(data,function(d){return d.row+":"+d.col;})
        .enter()
        .append("rect")
        .attr("x", function(d) { return d.col * cellSize; })
        .attr("y", function(d) { return d.row * cellSize; })
        .attr("class", function(d){return "cell cell-border cr"+(d.row-1)+" cc"+(d.col-1);})
        .attr("width", cellSize)
        .attr("height", cellSize)

        .style("fill", function(d) { return colorScale(d.value); })
        /* .on("click", function(d) {
               var rowtext=d3.select(".r"+(d.row-1));
               if(rowtext.classed("text-selected")==false){
                   rowtext.classed("text-selected",true);
               }else{
                   rowtext.classed("text-selected",false);
               }
        })*/
        .on("mouseover", function(d){
               //highlight text
               d3.select(this).classed("cell-hover",true);
               d3.selectAll(".rowLabel").classed("text-highlight",function(r,ri){ return ri==(d.row-1);});
               d3.selectAll(".colLabel").classed("text-highlight",function(c,ci){ return ci==(d.col-1);});
        
               //Update the tooltip position and value
               d3.select("#tooltip")
                 .style("left", (d3.event.pageX+10) + "px")
                 .style("top", (d3.event.pageY-10) + "px")
                 .select("#value")
                 .html(rowLabel[d.row-1]+","+colLabel[d.col-1]+"<br />" + "Total:"+d.value);  
               //Show the tooltip
               d3.select("#tooltip").classed("hidden", false);
        })
        .on("mouseout", function(){
               d3.select(this).classed("cell-hover",false);
               d3.selectAll(".rowLabel").classed("text-highlight",false);
               d3.selectAll(".colLabel").classed("text-highlight",false);
               d3.select("#tooltip").classed("hidden", true);
        })
        
          /*newButton = document.createElement('input');
          newButton.type = 'button';
          newButton.value = "val";
          newButton.onclick = function () {
            alert('You pressed ');
           // arrayToModify[arrayToModify.length] = this.id;
          }
    */
        ;
        
        
    //  var butt = root.append("button").text("run").on("click", alert("Hello"));



    // Change ordering of cells

    function sortbylabel(rORc,i,sortOrder){
       var t = svg.transition().duration(3000);
       var log2r=[];
       var sorted; // sorted is zero-based index
       d3.selectAll(".c"+rORc+i) 
         .filter(function(ce){
            log2r.push(ce.value);
          })
       ;
       if(rORc=="r"){ // sort log2ratio of a gene
         sorted=d3.range(col_number).sort(function(a,b){ if(sortOrder){ return log2r[b]-log2r[a];}else{ return log2r[a]-log2r[b];}});
         t.selectAll(".cell")
           .attr("x", function(d) { return sorted.indexOf(d.col-1) * cellSize; })
           ;
         t.selectAll(".colLabel")
          .attr("y", function (d, i) { return sorted.indexOf(i) * cellSize; })
         ;
       }else{ // sort log2ratio of a contrast
         sorted=d3.range(row_number).sort(function(a,b){if(sortOrder){ return log2r[b]-log2r[a];}else{ return log2r[a]-log2r[b];}});
         t.selectAll(".cell")
           .attr("y", function(d) { return sorted.indexOf(d.row-1) * cellSize; })
           ;
         t.selectAll(".rowLabel")
          .attr("y", function (d, i) { return sorted.indexOf(i) * cellSize; })
         ;
       }
    }

    d3.select("#order").on("change",function(){
    order(this.value);
    });

    function order(value){
    if(value=="hclust"){
    var t = svg.transition().duration(3000);
    t.selectAll(".cell")
      .attr("x", function(d) { return hccol.indexOf(d.col) * cellSize; })
      .attr("y", function(d) { return hcrow.indexOf(d.row) * cellSize; })
      ;

    t.selectAll(".rowLabel")
      .attr("y", function (d, i) { return hcrow.indexOf(i+1) * cellSize; })
      ;

    t.selectAll(".colLabel")
      .attr("y", function (d, i) { return hccol.indexOf(i+1) * cellSize; })
      ;

    }else if (value=="probecontrast"){
    var t = svg.transition().duration(3000);
    t.selectAll(".cell")
      .attr("x", function(d) { return (d.col - 1) * cellSize; })
      .attr("y", function(d) { return (d.row - 1) * cellSize; })
      ;

    t.selectAll(".rowLabel")
      .attr("y", function (d, i) { return i * cellSize; })
      ;

    t.selectAll(".colLabel")
      .attr("y", function (d, i) { return i * cellSize; })
      ;

    }else if (value=="probe"){
    var t = svg.transition().duration(3000);
    t.selectAll(".cell")
      .attr("y", function(d) { return (d.row - 1) * cellSize; })
      ;

    t.selectAll(".rowLabel")
      .attr("y", function (d, i) { return i * cellSize; })
      ;
    }else if (value=="contrast"){
    var t = svg.transition().duration(3000);
    t.selectAll(".cell")
      .attr("x", function(d) { return (d.col - 1) * cellSize; })
      ;
    t.selectAll(".colLabel")
      .attr("y", function (d, i) { return i * cellSize; })
      ;
    }
    }
    // 
    var sa=d3.select(".g3")
      .on("mousedown", function() {
          if( !d3.event.altKey) {
             d3.selectAll(".cell-selected").classed("cell-selected",false);
             d3.selectAll(".rowLabel").classed("text-selected",false);
             d3.selectAll(".colLabel").classed("text-selected",false);
          }
         var p = d3.mouse(this);
         sa.append("rect")
         .attr({
             rx      : 0,
             ry      : 0,
             class   : "selection",
             x       : p[0],
             y       : p[1],
             width   : 1,
             height  : 1
         })
      })
      .on("mousemove", function() {
         var s = sa.select("rect.selection");
      
         if(!s.empty()) {
             var p = d3.mouse(this),
                 d = {
                     x       : parseInt(s.attr("x"), 10),
                     y       : parseInt(s.attr("y"), 10),
                     width   : parseInt(s.attr("width"), 10),
                     height  : parseInt(s.attr("height"), 10)
                 },
                 move = {
                     x : p[0] - d.x,
                     y : p[1] - d.y
                 }
             ;
      
             if(move.x < 1 || (move.x*2<d.width)) {
                 d.x = p[0];
                 d.width -= move.x;
             } else {
                 d.width = move.x;       
             }
      
             if(move.y < 1 || (move.y*2<d.height)) {
                 d.y = p[1];
                 d.height -= move.y;
             } else {
                 d.height = move.y;       
             }
             s.attr(d);
      
                 // deselect all temporary selected state objects
             d3.selectAll('.cell-selection.cell-selected').classed("cell-selected", false);
             d3.selectAll(".text-selection.text-selected").classed("text-selected",false);

             d3.selectAll('.cell').filter(function(cell_d, i) {
                 if(
                     !d3.select(this).classed("cell-selected") && 
                         // inner circle inside selection frame
                     (this.x.baseVal.value)+cellSize >= d.x && (this.x.baseVal.value)<=d.x+d.width && 
                     (this.y.baseVal.value)+cellSize >= d.y && (this.y.baseVal.value)<=d.y+d.height
                 ) {
      
                     d3.select(this)
                     .classed("cell-selection", true)
                     .classed("cell-selected", true);

                     d3.select(".r"+(cell_d.row-1))
                     .classed("text-selection",true)
                     .classed("text-selected",true);

                     d3.select(".c"+(cell_d.col-1))
                     .classed("text-selection",true)
                     .classed("text-selected",true);
                 }
             });
         }
      })
      .on("mouseup", function() {
            // remove selection frame
         sa.selectAll("rect.selection").remove();
      
             // remove temporary selection marker class
         d3.selectAll('.cell-selection').classed("cell-selection", false);
         d3.selectAll(".text-selection").classed("text-selection",false);
      })
      .on("mouseout", function() {
         if(d3.event.relatedTarget.tagName=='html') {
                 // remove selection frame
             sa.selectAll("rect.selection").remove();
                 // remove temporary selection marker class
             d3.selectAll('.cell-selection').classed("cell-selection", false);
             d3.selectAll(".rowLabel").classed("text-selected",false);
             d3.selectAll(".colLabel").classed("text-selected",false);
         }
      })
      ;
      
    function add() {


    };
    });

    </script> <script id="progressive">
// linear color scale
    // interact with this variable from a javascript console
    var pc_progressive;

    // load csv file and create the chart
    d3.csv('StateByMonth.csv', function(data) {
    var colorgen = d3.scale.category20();
    var colors = {};
    _(data).chain()
    .pluck('group')
    .uniq()
    .each(function(d,i) {
      colors[d] = colorgen(i);
    });

    var color = function(d) { return colors[d.group]; };

    pc_progressive = d3.parcoords()("#example-progressive")
    .data(data)
    .color(color)
    .alpha(0.4)
    .margin({ top: 24, left: 150, bottom: 12, right: 0 })
    .mode("queue")
    .render()
    .brushMode("1D-axes")  // enable brushing
    .interactive()  // command line mode

    pc_progressive.svg.selectAll("text")
    .style("font", "10px sans-serif");
    });
    </script>
</body>
</html>
<!-- Hosting24 Analytics Code -->
<script type="text/javascript" src="http://stats.hosting24.com/count.php"></script>
<!-- End Of Analytics Code -->
